function code = encoder( x, g_out,g_in,permution)

%-------------------------------outer code---------------------------------
code_out = rsc_encode(g_out,x,-1);
%--------------------------------------------------------------------------

%------------------------------interleaver---------------------------------
code_middle = code_out(permution);
%--------------------------------------------------------------------------

%----------------------------- inner code ---------------------------------
code_in = rsc_encode(g_in, code_middle, -1 );
%--------------------------------------------------------------------------

% antipodal modulation: +1/-1
code = 2 * code_in - ones(size(code_in));

